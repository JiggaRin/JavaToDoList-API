# Java ToDo List API

[![Java](https://img.shields.io/badge/Java-17-blue)](https://jdk.java.net/)
[![Spring Boot](https://img.shields.io/badge/Spring_Boot-3.4.5-brightgreen)](https://spring.io/projects/spring-boot)
[![Docker](https://img.shields.io/badge/Docker-Compose-blue)](https://www.docker.com/)

The **Java ToDo List API** is a robust *backend RESTful API* for managing users, tasks, and task categories in a to-do list application. Built with **Spring Boot**, it features secure **JWT-based authentication**, a **MySQL** database with **Flyway** migrations, and comprehensive unit and integration tests. This project showcases expertise in designing *scalable REST APIs*, implementing advanced security with role-based and permission-based access, managing relational databases, and containerizing applications with **Docker**.

This is a personal project to master **Spring Boot**, *REST API design*, *secure backend development*, and *testing*.

[**GitHub Repository**](https://github.com/JiggaRin/JavaToDoList-API)

---

## Features

- **User Authentication**:
  - Register new users with email, username, and password (`/api/register`).
  - Authenticate users and issue JWT tokens (`/api/login`).
  - Refresh JWT tokens (`/api/refresh`).
  - Log out users (`/api/logout`).
- **Admin User Management**:
  - Create users with specific roles (`USER`, `ADMIN`, `MODERATOR`) (`/api/admin/register`, admin only).
  - Delete users and associated data (`/api/admin/users/{userId}`, admin only).
- **User Profile Management**:
  - Update profile details (e.g., name, email) (`/api/users`).
  - Securely update user password (`/api/users/change-password`).
- **Task Management**:
  - Create tasks with title, description, status, and category (`/api/tasks`).
  - List all tasks for (`/api/tasks`, admin/moderator only).
  - Retrieve a specific task by ID (`/api/tasks/{taskId}`, admin/moderator only).
  - Retrieve all user's task by userID (`/api/tasks/user/{userId}`, admin/moderator only).
  - Retrieve all user's task (`/api/tasks/my-tasks`, task's owner only).
  - Update task details (`/api/tasks/{taskId}`).
  - Update task status (`/api/tasks/update-status/{taskId}`)
  - Delete tasks (`/api/tasks/{taskId}`).
  - Restricted to task owners via permission-based access.
- **Task Category Management**:
  - Create categories to organize tasks (`/api/categories`, admin/moderator only).
  - List all categories (`/api/categories`, admin/moderator only).
  - Retrieve a specific category by ID (`/api/categories/{categoryId}`, admin/moderator only).
  - Update category details (`/api/categories/{categoryId}`, admin/moderator only).
  - Delete categories (`/api/categories/{categoryId}`, admin/moderator only).
- **Security**:
  - JWT-based authentication with `JwtAuthenticationFilter`.
  - Role-based access control (`USER`, `ADMIN`, `MODERATOR`).
  - Permission-based access for tasks.
- **Database**:
  - MySQL with tables for `users`, `tasks`, `refresh_token`, `categories`, `task_categories` and `flyway_schema_history`.
  - Cascading deletes (e.g., deleting a user removes tasks, tokens, and categories).
  - Flyway migrations for schema consistency.
- **Testing**:
  - Unit tests for services.
  - Integration tests for repository interactions with the database.
- **API Documentation** (In Progress):
  - Swagger UI for interactive API documentation (work in progress).

---

## Tech Stack

- **Java 17**: Modern Java features for robust development.
- **Spring Boot 3.4.5**: Framework for RESTful APIs.
- **Spring Security**: JWT authentication, role-based, and permission-based authorization.
- **MySQL**: Relational database for persistent storage.
- **Flyway**: Database migrations for schema management.
- **Springdoc OpenAPI 2.6.0**: API documentation (Swagger UI, in progress).
- **Maven**: Dependency management and build tool.
- **Docker & Docker Compose**: Containerized application and database.
- **JUnit 5**: Unit and integration testing.

---

## Prerequisites

Ensure the following tools are installed:
- [**Docker**](https://www.docker.com/get-started)
- [**Docker Compose**](https://docs.docker.com/compose/install/)
- [**Java Development Kit (JDK) 17**](https://jdk.java.net/)
- [**Maven**](https://maven.apache.org/install.html)

Verify installations:
```bash
docker --version
docker-compose --version
java --version
mvn --version
```

---

## Project Structure

- `src/` - Source code (controllers, services, repositories).
- `Dockerfile` - Docker configuration for the application.
- `docker-compose.yaml` - Docker Compose setup for app and MySQL.
- `target/` - Compiled `.jar` file generated by Maven.
- `src/test/` - Unit and integration tests.

---

## Setup Instructions

### 1. Clone the Repository
```bash
git clone https://github.com/JiggaRin/JavaToDoList-API.git
cd JavaToDoList-API
```

### 2. Build the Application
Compile the project and generate the `.jar` file:
```bash
mvn clean install
```

### 3. Start the Application
Launch the application and MySQL database using Docker Compose:
```bash
docker-compose up -d
```
This will:
- Build the Docker image for the API.
- Start the MySQL container.
- Run the application on port `8080`.

### 4. Verify the Setup
- Check running containers:
  ```bash
  docker ps
  ```
  Confirm `mysql-container` and `todo-app` are running.
- Test an endpoint (e.g., register a user):
  ```bash
  curl -X POST http://localhost:8080/api/register \
       -H "Content-Type: application/json" \
       -d '{"username":"testuser","email":"test@example.com","password":"Password123!","firstName":"Test","lastName":"User"}'
  ```
- Test task creation (after login to get JWT):
  ```bash
  curl -X POST http://localhost:8080/api/tasks \
       -H "Content-Type: application/json" \
       -H "Authorization: Bearer <your-jwt-token>" \
       -d '{"title":"Test Task","description":"Sample task","status":"TODO","priority":"MEDIUM","dueDate":"2025-12-31"}'
  ```
- API documentation (in progress):
  ```
  http://localhost:8080/swagger-ui.html
  ```

---

## API Endpoints

<!-- Authentication -->
**Authentication**

| Method | Endpoint               | Description              | Access  |
|--------|------------------------|--------------------------|---------|
| POST   | `/api/register`        | Register user            | Public  |
| POST   | `/api/login`           | Authenticate user        | Public  |
| POST   | `/api/refresh`         | Refresh JWT token        | Public  |
| POST   | `/api/logout`          | Log out user             | Public  |

<!-- Admin -->
**Admin**

| Method | Endpoint                        | Description              | Access      |
|--------|---------------------------------|--------------------------|-------------|
| POST   | `/api/admin/register`           | Register user with role  | Admin only  |
| DELETE | `/api/admin/users/{userId}`     | Delete user by ID        | Admin only  |

<!-- User -->
**User**

| Method | Endpoint                        | Description              | Access        |
|--------|---------------------------------|--------------------------|---------------|
| GET    | `/api/users/current`            | Get user profile         | Authenticated |
| PUT    | `/api/users/current`            | Update user profile      | Authenticated |
| PUT    | `/api/users/current/password`   | Update user password     | Authenticated |

<!-- Task -->
**Task**

| Method | Endpoint                              | Description                  | Access                        |
|--------|---------------------------------------|------------------------------|-------------------------------|
| POST   | `/api/tasks`                          | Create task                  | Authenticated                 |
| GET    | `/api/tasks`                          | List all tasks               | Admin/Moderator               |
| GET    | `/api/tasks/{taskId}`                 | Get task by ID               | Admin/Moderator               |
| PUT    | `/api/tasks/{taskId}`                 | Update task                  | Task Owner/Admin/Moderator    |
| DELETE | `/api/tasks/{taskId}`                 | Delete task                  | Task Owner/Admin/Moderator    |
| GET    | `/api/tasks/user/{userId}`            | Get tasks by user ID         | Admin/Moderator               |
| GET    | `/api/tasks/my-tasks`                 | Get userâ€™s tasks             | Task Owner                    |
| PUT    | `/api/tasks/update-status/{taskId}`   | Update task status           | Task Owner/Admin/Moderator    |

<!-- Task Category -->
**Task Category**

| Method | Endpoint                        | Description                  | Access            |
|--------|---------------------------------|------------------------------|-------------------|
| POST   | `/api/categories`               | Create category              | Authenticated     |
| GET    | `/api/categories`               | List all categories          | Admin/Moderator   |
| GET    | `/api/categories/{categoryId}`  | Get category by ID           | Category Owner    |
| PUT    | `/api/categories/{categoryId}`  | Update category              | Category Owner    |
| DELETE | `/api/categories/{categoryId}`  | Delete category              | Category Owner    |

---

## Environment Variables

Defined in `docker-compose.yaml`:

### MySQL Service
- `MYSQL_ROOT_PASSWORD`: `root`
- `MYSQL_DATABASE`: `todolist`
- `MYSQL_USER`: `todo_user`
- `MYSQL_PASSWORD`: `password`

### Application Service
- `SPRING_DATASOURCE_URL`: `jdbc:mysql://mysql:3306/todolist`
- `SPRING_DATASOURCE_USERNAME`: `todo_user`
- `SPRING_DATASOURCE_PASSWORD`: `password`

---

## Stopping the Application
```bash
docker-compose down
```

---

## Troubleshooting

- **Database Issues**:
  - Verify MySQL container: `docker ps`.
  - Check credentials in `docker-compose.yaml`.
- **Port Conflicts**:
  - Ensure ports `3306` (MySQL) and `8080` (app) are free.
- **Logs**:
  - Inspect container logs:
    ```bash
    docker logs todo-app
    docker logs mysql-container
    ```

---

## Cleanup
Remove containers, networks, and volumes:
```bash
docker-compose down -v
```

---

## Future Improvements
- Complete **Swagger UI** integration for interactive API documentation.
- Add task filtering and search (e.g., by status, priority, or due date).
- Expand integration tests for controllers and services.
- Implement a **CI/CD pipeline** for automated builds and deployments.

---

## License
This project is licensed under the [**MIT License**](./LICENSE).

---

Thank you for exploring the **Java ToDo List API**! This project highlights my skills in building *secure*, *scalable* REST APIs with **Spring Boot**, **Docker**, and *testing*. For questions or feedback, feel free to open an issue on [**GitHub**](https://github.com/JiggaRin/JavaToDoList-API).